<div class="row">
    <div class="col-8">

        
        <div class="card " *ngIf="!loading">
            <div class="card-body">
                <h4 class="card-subtitle">Listado Cotizaciones</h4>
                <table class="table table-bordered table-inverse table-responsive">
                    <thead class="thead-inverse">
                        <tr >
                            <th scope="col" >Fecha</th>
                            <th scope="col">Cliente</th>
                            <th scope="col">Producto</th>
                            <th scope="col">Estado</th>
                            <th scope="col">Opcion</th>
                        </tr>
                    </thead>
                    <tbody >
                        <tr *ngFor="let cot of cotizaciones" scope="row">
                            <td >
                                <div>{{ cot['updated_at'] | date:'YYYY-MM-dd'}}</div>
                            </td>
                            <td>
                                <div class="mb-2"><strong>CC/Nit:&nbsp;</strong>{{ cot['tercero_documento'] }}</div>
                                <div class="mb-2"><strong>Nombre:&nbsp;</strong>{{ cot['tercero_nombre']}}</div>
                                <div *ngIf="cot['asesor'];else sinAsignar" class="mb-2">
                                    <strong>Asesor:&nbsp;</strong> {{ cot['asesor']['name']}} - {{ cot['asesor']['email']}}
                               </div> 
                               <ng-template #sinAsignar class="mb-2"><strong>Asesor:&nbsp;</strong>Sin Asignar</ng-template>
                            <td>
                                <div *ngFor="let item of cot['ordenes']" [ngStyle]="{'border':'0.5px solid rgb(204 204 204 / 47%)','padding':'10px','margin-bottom':'8px'}">
                                    <div *ngIf="item['producto']" class="mb-3">{{ item['producto']['equipo']['modelo'] }} - {{ item['producto']['equipo']['nombre'] }}</div>
                                    <div class="mb-2"><strong>Capacidad:&nbsp;</strong>{{ item['capacidad']['valor'] | number}}</div>
                                    <div class="mb-2"><strong>Voltaje:&nbsp;</strong>{{ item['voltaje']['nombre']}}</div>
                                    <div class="mb-2"><strong>Circuito:&nbsp;</strong>{{ item['circuito']['nombre'] }}</div>
                                </div>
                            </td>
                            <td>{{ cot['estado']['nombre'] }}</td>
                            <td>
                                <div *ngIf="cot['cotestado_id']!=4">
                                    <button type="button" class="btn btn-secondary" (click)="editar_cotizacion(cot)">Editar</button>
                                </div>
                                <div class="mt-2" *ngIf="cot['cotestado_id']!=4">
                                    <button type="button" class="btn btn-secondary" (click)="editar_estado(cot)">Estado</button>
                                </div>
                                <div class="mt-2">
                                    <button type="button" class="btn btn-secondary" (click)="ordenes(cot)">Productos</button>
                                </div>
                                <div class="mt-2">
                                    <button type="button" class="btn btn-inverse-danger" (click)="pdfcotizacion(cot)">PdfCot</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                        
                </table>
            </div>
        </div>
        <app-loading *ngIf="loading"></app-loading>
   
    </div>

    <div class="col-4">
        <app-registro-cotizacion [cotizaciones_arr]="cotizaciones" *ngIf="!loading && operacion =='guardar'" (cotizacion_form)="cotizaciones = $event"></app-registro-cotizacion>
        <app-editar-cotizacion [cotizacion_id]="cotizacion_id" [cotizaciones_arr]="cotizaciones" *ngIf="!loading && operacion =='editar'" (cotizacion_form)="cotizaciones = $event" (operacion_form)="operacion = $event"></app-editar-cotizacion>
        <app-editar-cotizacion-estado [cotizacion_id]="cotizacion_id" [cotizaciones_arr]="cotizaciones" *ngIf="!loading && operacion =='estado'" (cotizacion_form)="cotizaciones = $event" (operacion_form)="operacion = $event"></app-editar-cotizacion-estado>
    </div>
 


